{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\crist\\\\Desktop\\\\Ciclo4\\\\src\\\\context\\\\DataProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useEffect } from \"react\";\nimport Data from \"Data2.js\";\nexport const DataContext = /*#__PURE__*/createContext();\nexport const DataProvider = props => {\n  _s();\n\n  const [productos, setProductos] = useState([]);\n  const [menu, setMenu] = useState(false);\n  const [carrito, setCarrito] = useState([]);\n  const [total, setTotal] = useState(0);\n  console.log(carrito);\n  useEffect(() => {\n    const producto = Data.items;\n\n    if (producto) {\n      setProductos(producto);\n    } else {\n      setProductos([]);\n    }\n  }, []);\n\n  const addCarrito = id => {\n    const check = carrito.every(item => {\n      return item.id !== id;\n    });\n\n    if (check) {\n      const data = productos.filter(producto => {\n        return producto.id === id;\n      });\n      setCarrito([...carrito, ...data]);\n    } else {\n      alert(\"El producto se ha añadido al carrito\");\n    }\n  };\n\n  useEffect(() => {\n    const dataCarrito = JSON.parse(localStorage.getItem('dataCarrito'));\n\n    if (dataCarrito) {\n      setCarrito(dataCarrito);\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('dataCarrito', JSON.stringify(carrito));\n  }, [carrito]);\n  useEffect(() => {\n    const getTotal = () => {\n      const res = carrito.reduce((prev, item) => {\n        return prev + item.price * item.cantidad;\n      }, 0);\n      setTotal(res);\n    };\n\n    getTotal();\n  }, [carrito]);\n  const value = {\n    productos: [productos],\n    menu: [menu, setMenu],\n    carrito: [carrito, setCarrito],\n    addCarrito: addCarrito,\n    total: [total, setTotal]\n  };\n  return /*#__PURE__*/_jsxDEV(DataContext.Provider, {\n    value: value,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 3\n  }, this);\n};\n\n_s(DataProvider, \"WCPcJJxALrJCYwkCfAiX3AnORVU=\");\n\n_c = DataProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"DataProvider\");","map":{"version":3,"sources":["C:/Users/crist/Desktop/Ciclo4/src/context/DataProvider.js"],"names":["React","createContext","useState","useEffect","Data","DataContext","DataProvider","props","productos","setProductos","menu","setMenu","carrito","setCarrito","total","setTotal","console","log","producto","items","addCarrito","id","check","every","item","data","filter","alert","dataCarrito","JSON","parse","localStorage","getItem","setItem","stringify","getTotal","res","reduce","prev","price","cantidad","value","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport Data from \"Data2.js\";\r\n\r\nexport const DataContext = createContext();\r\n\r\nexport const DataProvider = (props) => {\r\n\tconst [productos, setProductos] = useState([]);\r\n\tconst [menu, setMenu] = useState(false)\r\n\tconst [carrito, setCarrito] =useState([])\r\n\tconst [total, setTotal] = useState(0)\r\n\r\n\tconsole.log(carrito)\r\n\r\n  useEffect(() => {\r\n\t\tconst producto = Data.items \r\n\t\tif(producto){\r\n\t\t\tsetProductos(producto)\r\n\t\t}else{\r\n\t\t\tsetProductos([])\r\n\t\t}\r\n\t}, []);\r\n\r\n\tconst addCarrito = (id) =>{\r\n\t\tconst check = carrito.every(item =>{\r\n\t\t\treturn item.id !== id\r\n\t\t\t\r\n\t\t})\r\n\t\tif(check){\r\n\t\t\tconst data = productos.filter(producto =>{\r\n\t\t\t\treturn producto.id === id\r\n\t\t\t})\r\n\t\t\tsetCarrito([...carrito, ...data])\r\n\t\t}else{\r\n\t\t\talert(\"El producto se ha añadido al carrito\")\r\n\t\t}\r\n\t}\r\n\tuseEffect(() =>{\r\n\t\tconst dataCarrito = JSON.parse(localStorage.getItem('dataCarrito'))\r\n\t\tif(dataCarrito){\r\n\t\t\tsetCarrito(dataCarrito)\r\n\t\t}\r\n\t},[])\r\n\r\n\tuseEffect(() =>{\r\n\t\tlocalStorage.setItem('dataCarrito', JSON.stringify(carrito))\r\n\t},[carrito])\r\n\r\n\tuseEffect(() =>{\r\n\t\tconst getTotal = () =>{\r\n\t\t\tconst res = carrito.reduce((prev, item) =>{\r\n\t\t\t\treturn prev + (item.price * item.cantidad)\r\n\t\t\t},0)\r\n\t\t\tsetTotal(res)\r\n\t\t}\r\n\t\tgetTotal()\r\n\t},[carrito])\r\n\t\r\n\tconst value = {\r\n\t\tproductos : [productos],\r\n\t\tmenu: [menu, setMenu],\r\n\t\tcarrito: [carrito, setCarrito],\r\n\t\taddCarrito: addCarrito,\r\n\t\ttotal: [total, setTotal]\r\n\t}\r\n\treturn (\r\n\t\t<DataContext.Provider value={value}>\r\n\t\t\t{props.children}\r\n\t\t</DataContext.Provider>\r\n\t)\r\n};\r\n"]},"metadata":{},"sourceType":"module"}